# assets

This directory contains static assets and scripts for generating assets and item data for SpaceCases.

# Overview

The scripts in this repository do the following:

* Generate images for item skins, stickers and containers (gen_images.py).
* Generate item skin and sticker metadata (gen_item_metadata.py).
* Generate the container metadata and loot tables (gen_container_metadata.py).
* Refresh the prices in the files generated by the previous three scripts (refresh_prices.py).

# Setup

> [!WARNING]  
> If you plan on hosting this yourself, the data must be served via **HTTPS** and the server must be **public facing** otherwise discord will not be able to render any images served.

```bash
cd /path/you/want/to/serve/from
git clone https://github.com/Spacerulerwill/SpaceCases
cd SpaceCases/services/assets
cp .env.example .env
```

Use a text editor to fill in the environment variables in the `.env` file.

## Native (uv)

```bash
uv python install                               # Install python
uv sync                                         # Download dependencies
uv run --no-sync src/gen_images.py              # Generate images
uv run --no-sync src/gen_item_metadata.py       # Generate item metadata
uv run --no-sync src/gen_container_metadata.py  # Generate container metadata
uv run --no-sync src/refresh_prices.py          # Refresh item and container prices
cp -r static output/                            # Copy static assets to output
```

Then you can use whatever scheduling system you like (for example, `crontab`) to periodically refresh the price data. The data in the `assets` folder can then be served on your chosen domain using your preferred choice of HTTP server.

## via Docker

```bash
sudo docker build -t spacecases-assets -f Dockerfile ../../
sudo docker run -d -v /your/output/path:/app/services/assets/output --env-file .env --name assets spacecases-assets  # Run the service
```

The docker container will automatically refresh the price data for you. The data in the directory `/your/output/path` can then be served on your chosen domain using your preferred choice of HTTP server.
